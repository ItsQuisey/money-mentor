<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gamified Challenges - Money Mentor</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f7fa;
      color: #333;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    .container {
      background: #fff;
      padding: 25px;
      border-radius: 12px;
      max-width: 500px;
      width: 100%;
      box-shadow: 0 6px 12px rgba(0,0,0,0.1);
      animation: fadeIn 0.5s ease-in-out;
      text-align: center;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    h1 {
      color: #28a745;
    }
    .progress-bar {
      background: #e0e0e0;
      border-radius: 20px;
      overflow: hidden;
      height: 25px;
      margin: 20px 0;
    }
    .progress-fill {
      background: #28a745;
      height: 100%;
      width: 0%;
      transition: width 0.4s ease;
    }
    button {
      padding: 10px 15px;
      margin-top: 10px;
      background: #28a745;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    button:hover {
      background: #1e7e34;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      background: #f1f1f1;
      margin: 5px 0;
      padding: 10px;
      border-radius: 6px;
    }
    a.back-link {
      display: inline-block;
      margin-top: 15px;
      text-decoration: none;
      color: #28a745;
    }
    canvas {
      position: fixed;
      top: 0;
      left: 0;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 id="challengeTitle">7-Day $5 Challenge</h1>
    <p id="challengeDesc">Save $5 each day for 7 days. Mark a day complete to see your savings grow!</p>
    <div class="progress-bar">
      <div class="progress-fill" id="progressFill"></div>
    </div>
    <ul id="challengeList"></ul>
    <a class="back-link" href="index.html">⬅ Back to Home</a>
  </div>
  <canvas id="fireworks"></canvas>
  <script>
    const challengeList = document.getElementById('challengeList');
    const progressFill = document.getElementById('progressFill');
    const title = document.getElementById('challengeTitle');
    const desc = document.getElementById('challengeDesc');

    let days = 7;
    let amountPerDay = 5;

    let completedDays = JSON.parse(localStorage.getItem('completedDays')) || [];

    window.onload = () => {
      if (completedDays.length === days) {
        launchFireworks();
      }
      if (confirm('Would you like to restart the challenge?')) {
        completedDays = [];
        localStorage.setItem('completedDays', JSON.stringify(completedDays));
      }
      if (confirm('Would you like to up the difficulty?')) {
        days = 14;
        amountPerDay = 10;
        title.textContent = `${days}-Day $${amountPerDay} Challenge`;
        desc.textContent = `Save $${amountPerDay} each day for ${days} days. Mark a day complete to see your savings grow!`;
      }
      renderChallenge();
    };

    function renderChallenge() {
      challengeList.innerHTML = '';
      for (let i = 1; i <= days; i++) {
        const li = document.createElement('li');
        li.textContent = `Day ${i} - $${amountPerDay}`;
        if (completedDays.includes(i)) {
          li.style.background = '#d4edda';
          li.textContent += ' ✅';
        } else {
          const btn = document.createElement('button');
          btn.textContent = 'Mark Complete';
          btn.onclick = () => completeDay(i);
          li.appendChild(btn);
        }
        challengeList.appendChild(li);
      }
      updateProgress();
    }

    function completeDay(day) {
      if (!completedDays.includes(day)) {
        completedDays.push(day);
        localStorage.setItem('completedDays', JSON.stringify(completedDays));
        renderChallenge();
        if (completedDays.length === days) {
          launchFireworks();
        }
      }
    }

    function updateProgress() {
      const percentage = (completedDays.length / days) * 100;
      progressFill.style.width = percentage + '%';
    }

    function launchFireworks() {
      const canvas = document.getElementById('fireworks');
      const ctx = canvas.getContext('2d');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      const particles = [];
      function createFirework(x, y) {
        for (let i = 0; i < 50; i++) {
          particles.push({
            x,
            y,
            angle: Math.random() * 2 * Math.PI,
            speed: Math.random() * 5 + 2,
            radius: Math.random() * 2 + 1,
            alpha: 1
          });
        }
      }

      function updateParticles() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach((p, i) => {
          p.x += Math.cos(p.angle) * p.speed;
          p.y += Math.sin(p.angle) * p.speed;
          p.alpha -= 0.01;
          ctx.fillStyle = `rgba(255, ${Math.floor(Math.random()*255)}, 0, ${p.alpha})`;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.radius, 0, 2 * Math.PI);
          ctx.fill();
          if (p.alpha <= 0) particles.splice(i, 1);
        });
      }

      function animate() {
        updateParticles();
        if (particles.length > 0) {
          requestAnimationFrame(animate);
        }
      }

      for (let i = 0; i < 5; i++) {
        setTimeout(() => {
          createFirework(Math.random() * canvas.width, Math.random() * canvas.height / 2);
          animate();
        }, i * 500);
      }
    }
  </script>
</body>
</html>
